<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>FCM Token Test</title>
</head>
<body>
<h1>FCM Web Token ë°œê¸‰ í…ŒìŠ¤íŠ¸</h1>
<button id="btn">FCM í† í° ë°œê¸‰</button>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
    import { getMessaging, getToken } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-messaging.js";

    // ğŸ”¹ Firebase ì›¹ ì•± ì„¤ì • (ë„¤ê°€ ê°€ì ¸ì˜¨ ê·¸ëŒ€ë¡œ)
    const firebaseConfig = {
        apiKey: "AIzaSyD6DzX8KNIP6tqXQ9Ued-k0puanTsaa9X4",
        authDomain: "gray-pick-9183c.firebaseapp.com",
        projectId: "gray-pick-9183c",
        messagingSenderId: "673813814160",
        appId: "1:673813814160:web:075ed466bf3f206d4f7115"
    };

    // Firebase ì´ˆê¸°í™”
    const app = initializeApp(firebaseConfig);
    const messaging = getMessaging(app);

    document.getElementById("btn").onclick = async () => {
        try {
            // 1ï¸âƒ£ ì•Œë¦¼ ê¶Œí•œ ìš”ì²­
            const permission = await Notification.requestPermission();
            if (permission !== "granted") {
                alert("ì•Œë¦¼ ê¶Œí•œì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤.");
                return;
            }

            // 2ï¸âƒ£ FCM í† í° ë°œê¸‰
            const token = await getToken(messaging, {
                vapidKey: "BDPYMHziSEO7GVdFMxo8anwa1bat5OBENwhOnVycqC5RESlOV7qidM-Y9ilfZHgnIz_5LDDR7C2BKWyeVjHZp-0"
            });

            if (!token) {
                console.error("âŒ í† í° ë°œê¸‰ ì‹¤íŒ¨");
                alert("í† í°ì´ nullì…ë‹ˆë‹¤. ì½˜ì†” í™•ì¸");
                return;
            }

            console.log("ğŸ”¥ FCM TOKEN:", token);
            alert("ì½˜ì†”ì— FCM í† í°ì´ ì¶œë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
        } catch (e) {
            console.error("âŒ FCM í† í° ë°œê¸‰ ì˜¤ë¥˜", e);
        }
    };
</script>
</body>
</html>

